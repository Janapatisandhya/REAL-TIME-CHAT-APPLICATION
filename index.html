<!DOCTYPE html>
<html>
<head>
  <title>Real-Time Chat</title>
  <style>
    #chatBox {
      width: 100%;
      height: 200px;
      border: 1px solid #ccc;
      margin-bottom: 10px;
      overflow-y: scroll;
      padding: 5px;
    }
  </style>
</head>
<body>
  <h2>Real-Time Chat</h2>
  <div id="chatBox"></div>
  <input type="text" id="msgInput" />
  <button id="sendBtn">Send</button>

  <!-- This script enables message sending and sync across tabs -->
  <script>
    const chatBox = document.getElementById("chatBox");
    const input = document.getElementById("msgInput");
    const sendBtn = document.getElementById("sendBtn");

    sendBtn.addEventListener("click", () => {
      const message = input.value.trim();
      if (message !== "") {
        // Add timestamp to avoid skipping repeated messages
        const timestamp = Date.now();
        localStorage.setItem("newMessage", JSON.stringify({ message, timestamp }));
        displayMessage(message);
        input.value = "";
      }
    });

    function displayMessage(message) {
      chatBox.innerHTML += `<div>${message}</div>`;
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    // Listen for localStorage changes (from other tabs)
    window.addEventListener("storage", (event) => {
      if (event.key === "newMessage" && event.newValue) {
        const data = JSON.parse(event.newValue);
        displayMessage(data.message);
      }
    });
  </script>
</body>
</html>
